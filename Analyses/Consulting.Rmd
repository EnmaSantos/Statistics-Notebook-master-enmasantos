---
title: "The Sports Shack: Revenue Optimization Analysis"
output: 
  html_document:
    theme: cerulean
    code_folding: hide
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
library(mosaic)
library(car)
library(DT)
library(pander)
library(tidyverse)
```

## Executive Summary for "The Sports Shack"

**Client:** Mike, Owner of The Sports Shack  
**Consultant:** Enmanuel De Los Santos Cruz  
**Date:** November 29, 2025

### The Bottom Line

Mike, we analyzed 150 transactions to solve your "Winter Slump" and identify your true "VIP" customers. Here is what the data proves:

1.  **The "Winter Slump" is a Myth (for one group):** While sales generally dip in Winter, **Dads** actually increase their spending significantly during this season. They are your winter lifeline.
2.  **Service Pays:** We found a direct correlation between customer satisfaction and revenue. Increasing a customer's satisfaction score by just **1 point** adds an average of **$31** to their bill.
3.  **Your "VIP" Strategy:** Stop marketing to Teens. Focus your Back-to-School budget entirely on **Coaches** (who spend \~$700/visit) and Moms.

### Visual Evidence: Who Spends When?

The interaction plot below confirms that different groups drive your revenue in different seasons. Notice the massive spike for **Coaches** during "Back-To-School" and the solid performance of **Dads** in "Winter".

```{r load_data, echo=FALSE}
sports_data <- read.csv("sports_shack_transactions.csv", header=TRUE, stringsAsFactors = TRUE)

sports_data$Season <- as.factor(sports_data$Season)
sports_data$Customer_Segment <- as.factor(sports_data$Customer_Segment)
sports_data$Total_Spend <- as.numeric(sports_data$Total_Spend)
```

```{r interaction_plot, echo=FALSE, fig.width=10, fig.height=6}
par(mfrow=c(1,1))
interaction.plot(x.factor = sports_data$Season, 
                 trace.factor = sports_data$Customer_Segment, 
                 response = sports_data$Total_Spend,
                 type = "b",
                 col = c("red", "blue", "green", "orange", "purple"),
                 pch = 19,
                 fixed = TRUE,
                 leg.bty = "o",
                 trace.label = "Customer Segment",
                 main = "Interaction: Season vs. Customer Segment",
                 xlab = "Season",
                 ylab = "Average Total Spend ($)")
grid()
```

### Visual Evidence: The Value of Satisfaction

This scatterplot shows our regression model. The lines represent the predicted spending. Notice how the **higher position of the green dots** indicates that satisfied customers spend significantly more, even for the same number of items.

```{r regression_plot, echo=FALSE, fig.width=8, fig.height=6}
colors <- colorRampPalette(c("red", "yellow", "green"))(10)
sports_data$Color <- colors[sports_data$Satisfaction_Score]

plot(Total_Spend ~ Items_In_Cart, data=sports_data, 
     col=sports_data$Color, pch=19,
     main="Impact of Items & Satisfaction on Spend",
     xlab="Items in Cart", ylab="Total Spend ($)")
legend("topleft", legend=c("Low Sat (1)", "High Sat (10)"), 
       col=c("red", "green"), pch=19, bty="n", title="Satisfaction")

abline(lm(Total_Spend ~ Items_In_Cart, data=sports_data), col="gray", lwd=2, lty=2)
text(x=8, y=100, "Green dots (High Sat)\n = Higher Spend", pos=4, col="darkgreen")
```

-----

<br>

## Technical Analysis (Methodology)

*This section details the statistical rigor behind the recommendations above, including hypothesis testing and model diagnostics.*

### Analysis 1: Two-Way ANOVA (Seasonality)

We used a Two-Way ANOVA to test if `Customer_Segment` and `Season` interact to affect `Total_Spend`.

**Hypotheses:**

$$
H_0: \text{There is no interaction between Segment and Season (Parallel trends).} \\
H_a: \text{There is an interaction (Trends depend on the group).}
$$

**The Model:**
$$ Y_{ijk} = \mu + \alpha_i + \beta_j + (\alpha \beta)_{ij} + \epsilon_{ijk} $$

```{r anova_model}
model_anova <- aov(Total_Spend ~ Customer_Segment * Season, data = sports_data)
pander(summary(model_anova), caption = "Two-Way ANOVA Results")

par(mfrow=c(1,2))
plot(model_anova, which = 1)
plot(model_anova, which = 2)
par(mfrow=c(1,1))
```

*Note: p-values in table represent scientific notation (e.g., e-06).*

**Conclusion:**
With a significant p-value (**p < 0.001**) for the interaction term (`Customer_Segment:Season`), we reject the null hypothesis. The effect of Season on spending *strongly depends* on who the customer is. This validates the "Coach/Dad" split strategy.

### Analysis 2: Multiple Linear Regression (Bottlenecks)

We used Multiple Linear Regression to predict `Total_Spend` based on `Items_In_Cart` and `Satisfaction_Score`.

**Hypotheses:**

$$
H_0: \beta_1 = 0 \text{ and } \beta_2 = 0 \text{ (Predictors have no effect).} \\
H_a: \text{At least one predictor affects Total Spend.}
$$

**The Model:**
$$ \text{Spend}_i = \beta_0 + \beta_1(\text{Items}_i) + \beta_2(\text{Satisfaction}_i) + \epsilon_i $$

```{r regression_model}
final_model <- lm(Total_Spend ~ Items_In_Cart + Satisfaction_Score + Customer_Segment, data=sports_data)
pander(summary(final_model))
```

**Interpretation:**

  * **Intercept ($\beta_0$):** `r round(coef(final_model)[1], 2)`
  * **Items ($\beta_1$):** `r round(coef(final_model)[2], 2)` (For every extra item, spend increases by \~$54).
  * **Satisfaction ($\beta_2$):** `r round(coef(final_model)[3], 2)` (For every 1-point increase in satisfaction, spend increases by \~$31).
  * **$R^2$:** `r round(summary(final_model)$r.squared, 3)` (The model explains 95% of the variance).

### Diagnostic Checks (Assumptions)

We checked the validity of our Regression model using standard diagnostic plots.

**1. Normality of Residuals (Q-Q Plot):**
The residuals largely follow the line, indicating normality is satisfied.

**2. Constant Variance (Residuals vs. Fitted):**
The points are randomly scattered around zero with no clear "funnel" shape, satisfying the homoscedasticity assumption.

```{r diagnostics, fig.height=4, fig.width=10}
par(mfrow=c(1,3))
plot(final_model, which = 1)
plot(final_model, which = 2)

plot(final_model$residuals, 
     main = "Residuals vs Order", 
     ylab = "Residuals", 
     xlab = "Order of Collection")
abline(h = 0, col = "red", lty = 2)
par(mfrow=c(1,1))
```

### Limitations & Validity

While the analysis provides strong evidence for a specific marketing strategy, a few limitations should be noted:

1.  **Seasonality is a Proxy:** We grouped data by "Season" (e.g., Winter), but we do not have specific dates. A more granular analysis by month might reveal that the "Winter" spike is solely driven by the weeks before Christmas, rather than the whole season.
2.  **Satisfaction Score Subjectivity:** The satisfaction score (1-10) is subjective. A "7" from a teenager might mean something different than a "7" from a Dad. However, the strong correlation ($p < 0.001$) suggests it is still a valid predictor.
3.  **Causality:** While we see a correlation between Satisfaction and Spend, we cannot prove causality. It is possible that customers who spend more *become* more satisfied because they bought products they like, rather than high satisfaction *causing* them to spend more.

**Final Recommendation:**
The statistical models (ANOVA and Regression) both met the necessary assumptions of normality and equal variance. Therefore, the results—specifically that **Dads are the key to Winter revenue** and **Coaches drive Back-to-School profits**—are statistically valid and actionable.

### The Data

Below is the raw transactional data used for this analysis.

```{r show_data}
datatable(select(sports_data, -Color), options = list(pageLength = 5))
```
